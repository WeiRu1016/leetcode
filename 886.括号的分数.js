/*
 * @lc app=leetcode.cn id=922 lang=javascript
 *
 * [886] 可能的二分法
 */

// @lc code=start
/**
 * @param {number} n
 * @param {number[][]} dislikes
 * @return {boolean}
 */
var possibleBipartition = function(n, dislikes) {
    const map = dislikes.reduce((prev, [a, b]) => {
        prev[a] = prev[a] || [];
        prev[b] = prev[b] || [];
        
        prev[a].push(b);
        prev[b].push(a);

        return prev;
    }, {});

    const group = [];

    const bfs = (current, currentGroup) => {
        group[current] = currentGroup;
        const dis = map[current] || [];
    
        for (let i = 0; i < dis.length; i++) {
            if (group[dis[i]] !== undefined && group[dis[i]] === currentGroup) {
                return false;
            }
            if (group[dis[i]] === undefined && !bfs(dis[i], currentGroup === 1 ? 2 : 1)) {
                return false;
            }
        }
        return true;
    };

    for (let i = 1; i <= n; i++) {
        if (group[i] === undefined && !bfs(i, 1)) {
            return false;
        }
    }

    return true;
};
console.log(possibleBipartition(4, [[1,2],[1,3],[2,4]]) === true);
console.log(possibleBipartition(3, [[1,2],[1,3],[2,3]]) === false);
console.log(possibleBipartition(5, [[1,2],[2,3],[3,4],[4,5],[1,5]]) === false);
console.log(possibleBipartition(10, [[4,7],[4,8],[2,8],[8,9],[1,6],[5,8],[1,2],[6,7],[3,10],[8,10],[1,5],[7,10],[1,10],[3,5],[3,6],[1,4],[3,9],[2,3],[1,9],[7,9],[2,7],[6,8],[5,7],[3,4]]) === true);
console.log(possibleBipartition(50, [[21,47],[4,41],[2,41],[36,42],[32,45],[26,28],[32,44],[5,41],[29,44],[10,46],[1,6],[7,42],[46,49],[17,46],[32,35],[11,48],[37,48],[37,43],[8,41],[16,22],[41,43],[11,27],[22,44],[22,28],[18,37],[5,11],[18,46],[22,48],[1,17],[2,32],[21,37],[7,22],[23,41],[30,39],[6,41],[10,22],[36,41],[22,25],[1,12],[2,11],[45,46],[2,22],[1,38],[47,50],[11,15],[2,37],[1,43],[30,45],[4,32],[28,37],[1,21],[23,37],[5,37],[29,40],[6,42],[3,11],[40,42],[26,49],[41,50],[13,41],[20,47],[15,26],[47,49],[5,30],[4,42],[10,30],[6,29],[20,42],[4,37],[28,42],[1,16],[8,32],[16,29],[31,47],[15,47],[1,5],[7,37],[14,47],[30,48],[1,10],[26,43],[15,46],[42,45],[18,42],[25,42],[38,41],[32,39],[6,30],[29,33],[34,37],[26,38],[3,22],[18,47],[42,48],[22,49],[26,34],[22,36],[29,36],[11,25],[41,44],[6,46],[13,22],[11,16],[10,37],[42,43],[12,32],[1,48],[26,40],[22,50],[17,26],[4,22],[11,14],[26,39],[7,11],[23,26],[1,20],[32,33],[30,33],[1,25],[2,30],[2,46],[26,45],[47,48],[5,29],[3,37],[22,34],[20,22],[9,47],[1,4],[36,46],[30,49],[1,9],[3,26],[25,41],[14,29],[1,35],[23,42],[21,32],[24,46],[3,32],[9,42],[33,37],[7,30],[29,45],[27,30],[1,7],[33,42],[17,47],[12,47],[19,41],[3,42],[24,26],[20,29],[11,23],[22,40],[9,37],[31,32],[23,46],[11,38],[27,29],[17,37],[23,30],[14,42],[28,30],[29,31],[1,8],[1,36],[42,50],[21,41],[11,18],[39,41],[32,34],[6,37],[30,38],[21,46],[16,37],[22,24],[17,32],[23,29],[3,30],[8,30],[41,48],[1,39],[8,47],[30,44],[9,46],[22,45],[7,26],[35,42],[1,27],[17,30],[20,46],[18,29],[3,29],[4,30],[3,46]]) === true);
console.log(possibleBipartition(100,[[61,82],[25,82],[81,93],[86,90],[35,41],[9,62],[73,82],[54,92],[65,84],[18,45],[55,78],[65,96],[83,85],[71,78],[59,97],[45,78],[34,85],[56,58],[70,94],[12,69],[81,86],[95,98],[11,83],[72,73],[50,79],[74,89],[19,96],[90,99],[18,81],[19,44],[1,33],[57,60],[82,87],[36,74],[34,70],[29,62],[27,82],[73,92],[4,48],[52,74],[53,82],[51,100],[66,84],[17,84],[7,80],[83,99],[32,91],[46,63],[20,54],[10,71],[4,17],[61,87],[24,87],[63,65],[9,59],[74,75],[40,55],[42,53],[55,85],[4,99],[64,67],[31,85],[21,86],[22,76],[2,30],[71,83],[21,48],[5,29],[36,70],[2,82],[74,92],[53,78],[30,64],[76,90],[2,25],[83,87],[42,98],[94,96],[75,99],[55,58],[38,79],[1,95],[7,46],[11,43],[90,93],[43,54],[31,91],[7,85],[90,97],[50,77],[87,98],[33,72],[71,95],[27,62],[82,85],[87,88],[97,98],[74,100],[25,68],[1,80],[17,30],[9,48],[42,46],[43,47],[49,80],[18,55],[86,93],[66,82],[44,70],[41,92],[68,76],[19,55],[96,97],[45,88],[80,100],[69,98],[32,51],[20,30],[62,93],[30,42],[40,57],[17,41],[78,83],[65,73],[11,21],[91,95],[3,21],[43,75],[24,49],[18,91],[2,54],[63,98],[98,99],[59,66],[21,24],[95,97],[15,86],[76,96],[8,9],[18,41],[67,78],[39,41],[92,94],[55,74],[95,96],[22,69],[2,23],[90,100],[71,74],[25,53],[58,77],[91,96],[34,75],[29,33],[3,50],[94,99],[29,82],[90,91],[76,83],[67,93],[68,71],[60,100],[85,92],[71,89],[59,80],[19,22],[22,33],[34,60],[17,28],[27,76],[28,64],[40,96],[68,78],[58,95],[22,73],[46,67],[96,99],[10,67],[86,99],[84,87],[50,99],[82,100],[37,83],[73,83],[50,87],[60,91],[74,81],[89,95],[31,81],[8,86],[21,60],[35,94],[56,57],[62,74],[95,99],[99,100],[29,38],[24,72],[16,37],[45,97],[74,88],[90,94],[12,49],[30,68],[1,22],[16,74],[7,38],[78,100],[44,76],[83,91],[14,45],[47,65],[58,75],[94,100],[53,56],[59,93],[72,99],[21,47],[4,41],[28,62],[40,41],[34,35],[16,50],[40,79],[3,69],[51,52],[5,71],[6,95],[16,65],[28,97],[15,49],[3,23],[25,38],[47,63],[4,16],[28,53],[3,61],[74,96],[81,91],[30,39],[52,80],[48,80],[79,88],[12,41],[38,54],[53,70],[22,85],[16,94],[58,93],[20,60],[3,28],[51,54],[66,98],[80,88],[27,33],[33,54],[73,79],[95,100],[25,54],[32,45],[33,40],[16,32],[38,87],[1,71],[63,85],[94,97],[88,99],[69,79],[66,67],[67,94],[50,62],[71,73],[39,96],[4,6],[85,86],[23,52],[37,90],[7,17],[11,82],[42,84],[51,82],[2,70],[79,84],[40,74],[53,72],[10,15],[20,83],[44,48],[90,96],[3,10],[58,73],[45,70],[33,73],[70,86],[9,69],[6,15],[82,84],[48,69],[12,91],[24,81],[72,75],[21,23],[36,81],[79,93],[35,60],[13,43],[44,47],[17,75],[30,87],[7,83],[42,85],[33,66],[1,57],[81,89],[28,45],[34,56],[5,61],[49,73],[1,76],[50,88],[65,80],[74,82],[14,27],[40,94],[12,63],[64,68],[44,60],[91,92],[93,94],[32,83],[8,83],[80,90],[81,82],[86,89],[31,41],[72,95],[50,83],[63,87],[42,61],[92,93],[29,99],[69,77],[58,98],[50,60],[59,98],[23,88],[8,90],[80,81],[34,80],[35,66],[56,61],[70,93],[36,78],[22,41],[24,76],[16,25],[34,36],[13,86],[53,86],[32,97],[68,70],[84,97],[85,93],[33,79],[70,84],[47,50],[4,21],[87,91],[34,69],[22,32],[12,85],[36,83],[50,69],[54,71],[77,85],[24,31],[64,79],[19,80],[88,92],[53,99],[69,89],[16,91],[44,93],[96,98],[22,61],[52,92],[62,68],[61,78],[3,78],[78,80],[29,72],[55,86],[1,100],[40,72],[29,98],[66,68],[68,82],[60,87],[57,83],[21,61],[5,26],[59,69],[86,95],[63,75],[61,71],[76,97],[24,71],[4,79],[34,43],[49,65],[4,85],[31,95],[11,13],[76,85],[92,95],[59,100],[69,85],[57,84],[69,74],[57,62],[82,89],[36,72],[87,92],[2,40],[98,100],[1,92],[48,88],[47,97],[64,74],[44,74],[90,98],[47,79],[69,94],[60,67],[93,98],[29,57],[24,85],[52,87],[3,81],[16,71],[17,79],[70,72],[12,45],[16,93],[32,80],[92,97],[96,100],[60,90],[86,96]]));
console.log(possibleBipartition(200,
    [[131,143],[167,174],[112,176],[172,187],[69,139],[116,158],[99,126],[96,146],[106,111],[174,195],[104,115],[160,190],[129,139],[157,186],[149,184],[28,88],[84,125],[27,122],[119,165],[184,189],[143,194],[106,170],[140,165],[87,174],[169,177],[10,97],[165,187],[95,183],[111,123],[68,92],[76,155],[56,177],[84,95],[163,189],[158,200],[11,125],[64,177],[68,122],[147,185],[57,194],[192,200],[151,199],[35,46],[172,200],[113,136],[88,93],[196,198],[4,196],[190,195],[40,192],[76,121],[93,171],[61,182],[103,115],[188,193],[108,126],[71,138],[149,171],[162,197],[113,196],[169,186],[27,160],[99,183],[189,191],[107,190],[77,185],[72,180],[126,156],[168,179],[6,146],[43,91],[96,104],[100,129],[75,102],[80,107],[198,199],[97,108],[5,43],[153,178],[3,55],[41,136],[93,147],[3,190],[89,123],[28,174],[151,186],[76,112],[77,126],[110,148],[107,141],[65,193],[155,182],[179,181],[32,143],[107,145],[20,89],[154,161],[164,168],[47,99],[177,192],[130,194],[41,160],[126,189],[96,172],[45,166],[78,108],[79,102],[16,88],[190,191],[164,182],[89,116],[104,188],[150,183],[23,109],[26,179],[19,53],[85,89],[98,115],[139,173],[160,198],[147,199],[178,194],[22,175],[152,186],[50,180],[192,198],[72,200],[146,161],[110,181],[84,168],[113,186],[19,136],[60,145],[84,150],[174,197],[123,181],[179,186],[157,191],[149,189],[151,169],[180,189],[154,168],[132,183],[187,197],[29,101],[182,195],[183,190],[59,116],[126,142],[134,171],[95,179],[180,193],[127,143],[3,31],[75,143],[63,161],[153,188],[109,182],[147,178],[79,141],[73,78],[130,143],[89,164],[15,84],[50,120],[153,166],[26,92],[147,152],[155,165],[160,176],[72,127],[126,197],[117,135],[60,134],[184,191],[63,139],[17,70],[19,93],[81,170],[15,189],[77,164],[150,175],[1,18],[93,193],[119,149],[180,200],[127,180],[10,192],[114,171],[62,169],[60,83],[86,121],[45,143],[112,143],[81,197],[162,196],[109,175],[183,194],[103,185],[152,161],[100,121],[107,110],[11,85],[53,173],[131,151],[129,130],[85,153],[31,61],[78,95],[50,194],[75,95],[88,162],[34,51],[125,192],[85,131],[175,188],[65,69],[152,195],[144,160],[44,49],[6,197],[37,187],[70,155],[73,133],[153,185],[55,127],[94,172],[126,130],[71,184],[135,199],[96,106],[146,178],[53,140],[49,100],[107,180],[153,157],[29,179],[116,148],[181,189],[5,51],[93,182],[60,148],[38,88],[12,43],[33,170],[13,114],[189,196],[109,127],[72,143],[27,96],[148,185],[145,196],[76,173],[12,186],[118,197],[122,123],[163,169],[23,111],[35,198],[13,30],[87,123],[13,183],[33,65],[112,167],[184,185],[142,159],[103,175],[158,194],[19,98],[143,170],[64,153],[176,187],[56,141],[129,156],[188,195],[68,149],[141,148],[185,195],[27,67],[69,168],[53,89],[131,182],[4,200],[92,105],[117,188],[154,182],[55,87],[6,85],[143,193],[169,170],[187,199],[43,58],[12,177],[110,127],[27,159],[182,193],[187,189],[67,111],[188,190],[101,134],[154,195],[51,59],[8,84],[45,81],[82,120],[77,157],[193,199],[66,195],[172,183],[61,155],[86,94],[118,130],[19,147],[147,154],[113,139],[160,178],[42,153],[109,113],[48,160],[113,118],[67,147],[163,198],[70,140],[124,187],[22,33],[105,135],[162,198],[32,117],[1,153],[88,102],[102,170],[76,185],[166,192],[31,122],[138,175],[54,62],[42,110],[159,184],[133,181],[195,198],[68,88],[1,10],[57,85],[64,104],[125,144],[41,122],[194,198],[172,174],[84,184],[39,123],[128,179],[99,107],[88,132],[39,188],[186,197],[40,77],[30,192],[129,186],[191,199],[42,108],[161,174],[157,195],[95,163],[170,189],[191,193],[21,185],[146,150],[8,97],[173,186],[68,109],[142,154],[3,156],[56,162],[192,195],[14,66],[30,184],[35,182],[151,163],[117,151],[41,150],[110,152],[35,181],[179,185],[68,182],[161,167],[69,183],[80,141],[40,90],[124,197],[167,192],[140,173],[33,109],[80,163],[124,163],[165,179],[117,126],[134,180],[125,162],[77,136],[51,173],[111,115],[15,129],[133,200],[39,105],[63,177],[152,190],[93,124],[94,122],[46,119],[176,189],[3,171],[18,150],[75,198],[187,192],[197,199],[180,185],[100,198],[46,126],[48,58],[21,49],[187,191],[96,157],[19,62],[32,86],[64,154],[84,94],[94,125],[91,109],[193,197],[172,177],[43,134],[93,152],[41,62],[40,50],[193,194],[9,32],[42,135],[28,105],[148,159],[120,197],[161,177],[144,151],[58,162],[119,163],[174,186],[62,63],[36,43],[99,108],[56,107],[161,171],[79,112],[75,138],[93,157],[55,68],[126,139],[135,181],[137,174],[67,86],[170,176],[24,58],[83,91],[195,200],[124,175],[134,184],[129,198],[59,194],[123,170],[124,192],[66,167],[65,182],[90,162],[138,145],[7,135],[171,179],[115,162],[88,200],[150,197],[190,197],[184,193],[26,77],[18,30],[182,191],[73,167],[8,153],[108,197],[67,182],[48,191],[72,140],[61,170],[189,190],[69,117],[22,82],[19,76],[140,176],[33,106],[136,144],[90,125],[168,185],[178,183],[84,108],[77,141],[74,134],[18,109],[24,154],[125,129],[108,191],[192,197],[181,200],[41,85],[147,170],[113,187],[60,108],[140,194],[103,186],[156,189],[78,87],[186,189],[160,162],[153,192],[180,188],[110,128],[143,196],[187,194],[116,164],[28,120],[140,175],[85,186],[104,162],[73,148],[100,168],[65,110],[139,181],[127,140],[101,153],[80,187],[14,138],[105,197],[86,97],[125,154],[44,118],[158,198],[5,30],[172,197],[12,79],[172,180],[41,180],[113,188],[23,182],[157,159],[28,163],[150,152],[130,151],[25,123],[106,129],[54,170],[98,187],[91,189],[150,180],[13,130],[137,193],[117,162],[80,156],[136,158],[76,179],[178,182],[118,188],[107,184],[125,185],[15,142],[32,104],[195,197],[9,122],[67,121],[115,147],[170,184],[140,154],[159,197],[84,189],[183,195],[179,190],[167,188],[112,142],[156,179],[20,144],[182,200],[38,135],[191,194],[120,199],[120,190],[47,127],[136,191],[104,106],[96,176],[56,109],[152,194],[33,125],[58,111],[64,118],[165,183],[108,123],[191,196],[179,194],[49,131],[173,189],[21,166],[128,183],[87,89],[62,85],[172,192],[103,141],[36,81],[85,163],[140,197],[141,156],[142,163],[3,71],[133,147],[87,198],[105,140],[62,134],[164,169],[150,184],[177,199],[33,141],[139,169],[38,158],[112,192],[104,189],[39,159],[155,197],[65,107],[78,192],[60,197],[141,161],[70,73],[147,198],[45,89],[19,26],[20,134],[168,174],[192,199],[90,191],[186,200],[172,191],[33,51],[10,96],[80,121],[131,145],[5,61],[11,38],[110,144],[91,128],[186,187],[68,179],[129,183],[139,200],[118,172],[111,185],[20,97],[17,161],[14,27],[143,198],[1,102],[87,114],[38,184],[109,139],[131,196],[180,191],[183,185],[116,180],[106,176],[2,31],[35,119],[27,178],[149,194],[3,30],[175,191],[6,27],[76,159],[168,200],[115,140],[54,156],[48,115],[61,111],[114,139],[183,196],[115,178],[46,138],[57,190],[198,200],[118,141],[72,95],[92,130],[116,135],[157,183],[118,167],[120,194],[161,188],[144,148],[26,71],[105,158],[119,166],[188,197],[126,172],[45,151],[98,147],[38,136],[44,59],[104,171],[145,171],[196,199],[25,185],[168,169],[83,86],[30,132],[58,155],[124,172],[169,199],[6,61],[64,180],[147,186],[98,178],[36,78],[80,119],[170,188],[114,156],[16,25],[128,168],[139,198],[131,165],[94,150],[35,57],[132,166],[40,76],[123,184],[92,183],[2,126],[157,170],[105,137],[28,72],[162,192],[121,174],[123,166],[13,147],[187,200],[195,196],[132,171],[14,168],[96,117],[168,182],[169,200],[5,135],[125,170],[15,191],[27,166],[1,186],[105,139],[66,108],[53,139],[43,114],[199,200],[167,183],[64,161],[60,191],[75,113],[115,166],[196,200],[197,198],[179,196],[181,188],[4,164],[151,183],[35,62],[160,165],[112,115],[41,185],[150,190],[133,158],[187,193],[66,83],[139,171],[21,127],[108,135],[79,139],[33,110],[144,178],[196,197],[168,189],[31,119],[38,92],[114,180],[51,53],[34,199],[65,131],[166,196],[167,172],[181,193],[73,127],[109,186],[73,163],[128,166],[28,160],[47,132],[31,193],[15,118],[11,62],[180,184],[163,192],[37,172],[70,138],[143,192],[51,110],[21,105],[143,200],[123,130],[36,64],[60,121],[11,59],[31,124],[5,137],[188,191],[182,183],[62,99],[117,194],[76,153],[50,118],[193,198],[69,118],[197,200],[59,160],[153,171],[102,198],[175,195],[160,179],[106,114],[29,65],[41,171],[174,181],[136,188],[106,151],[4,58],[93,179],[175,176],[36,190],[101,149],[67,104],[17,108],[83,114],[142,178],[133,169],[105,168],[19,68],[181,195],[18,83],[105,170],[106,192],[125,175],[140,174],[172,175],[82,89],[141,195],[62,80],[186,194],[156,181],[29,183],[33,188],[50,72],[13,84],[184,192],[35,59],[93,166],[136,163],[135,149],[27,126],[189,200],[175,185],[71,163],[91,172],[18,55],[121,172],[33,81],[177,194],[169,189],[10,21],[2,150],[158,165],[11,24],[67,199],[114,161],[163,165],[52,186],[87,127],[179,198],[173,185],[80,195],[137,156],[113,162],[25,174],[192,196],[19,160],[175,177],[110,183],[75,115],[79,186],[89,97],[146,192],[141,152],[185,191],[132,175],[160,167],[154,199],[86,178],[151,175],[57,126],[123,169],[63,189],[105,136],[76,168],[45,161],[44,65],[127,167],[30,161],[6,107],[100,175],[107,122],[168,191],[158,182],[163,193],[24,45],[107,129],[90,145],[177,183],[163,176],[15,37],[2,58]]
    ));
console.log(possibleBipartition(5, [[1,2],[3,4],[4,5],[3,5]]))
// @lc code=end

